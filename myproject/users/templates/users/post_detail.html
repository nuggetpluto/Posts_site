{% extends "base.html" %}

{% block content %}
    <div class="card mb-4">
        <div class="card-body">
            <h2 class="card-title">{{ post.title }}</h2>
            <p class="card-text">{{ post.content }}</p>
            <p class="text-muted">–ê–≤—Ç–æ—Ä: {{ post.author }}</p>
        </div>
    </div>

    <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ -->
    <h4>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h4>
    <div class="list-group mb-4">
        {% for comment in comments %}
            <div class="list-group-item">
                <strong>{{ comment.author }}</strong> - {{ comment.date_posted }}
                <p>{{ comment.content }}</p>
            </div>
        {% endfor %}
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è -->
    <div id="add-comment-section" class="mb-4">
        <button id="show-comment-form-btn" class="btn btn-outline-primary">–ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–∞) -->
    <div id="comment-form-section" class="mb-4" style="display: none;">
        <form method="post">
            {% csrf_token %}
            {{ comment_form.as_p }}
            <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
        </form>
    </div>

    <!-- –õ–∞–π–∫–∏ -->
    <h4>–õ–∞–π–∫–∏</h4>
    <form method="post" action="{% url 'like_post' post.pk %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-success">
            üëç –õ–∞–π–∫ ({{ post.likes.count }})
        </button>
    </form>

    <!-- JavaScript –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ä–º—ã -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const showCommentFormBtn = document.getElementById("show-comment-form-btn");
            const commentFormSection = document.getElementById("comment-form-section");

            showCommentFormBtn.addEventListener("click", function() {
                // –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É –∏ –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É
                showCommentFormBtn.style.display = "none";
                commentFormSection.style.display = "block";
            });
        });
    </script>
{% endblock %}
